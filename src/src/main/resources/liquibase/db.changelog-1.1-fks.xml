<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="1.1.0" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="access_keys"
                                 baseColumnNames="university_id"
                                 constraintName="fk_access_key_university_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="universities"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.1" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="teachers"
                                 baseColumnNames="university_id"
                                 constraintName="fk_teacher_university_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="universities"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.2" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="students"
                                 baseColumnNames="class_id"
                                 constraintName="fk_student_class_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="classes"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.3" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="teachers_classes"
                                 baseColumnNames="teacher_id"
                                 constraintName="fk_teachers_classes_teacher_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="teachers"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.4" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="teachers_classes"
                                 baseColumnNames="class_id"
                                 constraintName="fk_teachers_classes_class_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="classes"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.5" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="teacher_roles"
                                 baseColumnNames="teacher_id"
                                 constraintName="fk_teacher_roles_teacher_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="teachers"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.6" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="teacher_roles"
                                 baseColumnNames="role_id"
                                 constraintName="fk_teacher_roles_role_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="roles"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.7" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="student_roles"
                                 baseColumnNames="student_id"
                                 constraintName="fk_student_roles_student_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="students"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.8" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="student_roles"
                                 baseColumnNames="role_id"
                                 constraintName="fk_student_roles_role_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="roles"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.9" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="password_reset_token"
                                 baseColumnNames="student_id"
                                 constraintName="fk_password_reset_token_student_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="students"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.10" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="password_reset_token"
                                 baseColumnNames="teacher_id"
                                 constraintName="fk_password_reset_token_teacher_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="teachers"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.11" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="verification_token"
                                 baseColumnNames="student_id"
                                 constraintName="fk_verification_token_student_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="students"
                                 referencedColumnNames="id" />
    </changeSet>

    <changeSet id="1.1.12" author="yuriy.paley">
        <addForeignKeyConstraint baseTableName="verification_token"
                                 baseColumnNames="teacher_id"
                                 constraintName="fk_verification_token_teacher_id"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedTableName="teachers"
                                 referencedColumnNames="id" />
    </changeSet>

</databaseChangeLog>
